Bug fixes and separate PTA